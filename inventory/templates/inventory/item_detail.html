{% extends "global/base.html" %}
{% block page_title %}{{ item.descricao }}{% endblock %}
{% block content %}

<!-- 2 colunas no desktop: 2fr (conteúdo) | 1fr (form) -->
<div class="grid gap-4 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]">

  <!-- coluna esquerda -->
  <section class="min-w-0">
    <div class="card bg-base-100 border">
      <div class="card-body">
        <!-- galeria fake -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div class="bg-base-200 rounded-box aspect-video"></div>
          <div class="bg-base-200 rounded-box aspect-video"></div>
          <div class="bg-base-200 rounded-box aspect-video"></div>
          <div class="bg-base-200 rounded-box aspect-video"></div>
        </div>

        <h3 class="text-lg font-semibold mt-6 mb-2">Detalhes</h3>

        <div class="grid sm:grid-cols-2 md:grid-cols-4 gap-4">
          <div class="card bg-base-100 border">
            <div class="card-body p-4">
              <div class="text-sm opacity-70">SKU</div>
              <div class="font-medium truncate">{{ item.sku }}</div>
            </div>
          </div>
          <div class="card bg-base-100 border">
            <div class="card-body p-4">
              <div class="text-sm opacity-70">Unidade</div>
              <div class="font-medium">{{ item.unidade }}</div>
            </div>
          </div>
          <div class="card bg-base-100 border">
            <div class="card-body p-4">
              <div class="text-sm opacity-70">Estoque</div>
              <div class="font-medium">{{ item.stock }}</div>
            </div>
          </div>
          <div class="card bg-base-100 border">
            <div class="card-body p-4">
              <div class="text-sm opacity-70">Est. mínimo</div>
              <div class="font-medium">{{ item.estoque_minimo }}</div>
            </div>
          </div>
        </div>

        <div class="mt-4 flex gap-2">
          <a href="{% url 'inventory:item-update' item.pk %}" class="btn">Editar</a>
          <a href="{% url 'inventory:item-delete' item.pk %}" class="btn btn-outline">Excluir</a>
        </div>
      </div>
    </div>
  </section>

  <!-- coluna direita (form) -->
  <aside class="min-w-0">
    <form method="post" action="{% url 'movements:movement-create' %}"
          class="card bg-base-100 border h-fit">
      {% csrf_token %}
      <div class="card-body grid md:grid-cols-2 gap-2">
        <input type="hidden" name="item" value="{{ item.pk }}">
        <input type="hidden" name="next" value="{{ request.get_full_path }}">
        <label class="form-control">
          <span class="label-text">Tipo</span>
          <select name="kind" class="select select-bordered">
            <option value="IN">Entrada</option>
            <option value="OUT">Saída</option>
          </select>
        </label>
        <label class="form-control">
          <span class="label-text">Quantidade</span>
          <input type="number" step="0.01" min="0.01" name="quantity" class="input input-bordered">
        </label>
        <label class="form-control md:col-span-2">
          <span class="label-text">Observação</span>
          <input type="text" name="note" class="input input-bordered" placeholder="ex.: ajuste manual">
        </label>
        <div class="md:col-span-2 card-actions justify-end">
          <button class="btn btn-primary">Aplicar</button>
        </div>
      </div>
    </form>
  </aside>

</div>
{% endblock %}
