{% load static %}
<!doctype html>
<html lang="pt-BR" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}RDTrackr{% endblock %}</title>

    {# APONTA PARA O ARQUIVO QUE O TW BUILD GERA #}
    <link href="{% static 'css/app.css' %}" rel="stylesheet" />

    <script>
      (function () {
        const t = localStorage.getItem('theme');
        if (t === 'dark' || (!t && matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark');
        }
      })();
    </script>
  </head>
  <body class="min-h-screen bg-white text-gray-900 dark:bg-gray-900 dark:text-white font-sans">
    <!-- NAV pÃºblica -->
    <header class="sticky top-0 z-40 border-b bg-white/80 backdrop-blur dark:bg-gray-900/80">
      <nav class="mx-auto flex h-16 max-w-7xl items-center justify-between px-4">
        <a href="{% url 'home:index' %}" class="inline-flex items-center gap-2 font-semibold">
           <img class="w-20 h-16 mr-2" src="{% static 'img/logo_completa.png' %}" alt="RDTrackr"> 
         
        </a>

        <ul class="hidden md:flex items-center gap-6 text-sm text-gray-600 dark:text-gray-300 list-none pl-0 m-0">
          <li><a href="{% url 'home:solutions' %}" class="hover:text-gray-900 dark:hover:text-white">SoluÃ§Ãµes</a></li>
          <li><a href="{% url 'home:segments' %}"  class="hover:text-gray-900 dark:hover:text-white">Segmentos</a></li>
          <li><a href="{% url 'home:plans' %}"     class="hover:text-gray-900 dark:hover:text-white">Planos</a></li>
          <li><a href="{% url 'home:help' %}"      class="hover:text-gray-900 dark:hover:text-white">Ajuda</a></li>
          <li><a href="{% url 'home:contact' %}"   class="hover:text-gray-900 dark:hover:text-white">Contato</a></li>
        </ul>

        <div class="flex items-center gap-3">
          <button
            class="rounded border px-3 py-1.5 text-sm dark:border-gray-700"
            title="Alternar tema"
            onclick="document.documentElement.classList.toggle('dark'); localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark':'light')">ðŸŒ—</button>

          {% if user.is_authenticated %}
            <a href="{% url 'inventory:item-list' %}" class="hidden md:inline-block rounded-lg border px-4 py-2 text-sm">Entrar no app</a>
          {% else %}
            <a href="{% url 'authors:login' %}"    class="hidden md:inline-block rounded-lg border px-4 py-2 text-sm">Entrar</a>
            <a href="{% url 'authors:register' %}" class="rounded-lg bg-primary-600 px-4 py-2 text-sm font-medium text-white hover:bg-primary-700">Criar conta</a>
          {% endif %}
        </div>
      </nav>
    </header>

    {% if messages %}
      <div class="mx-auto mt-4 max-w-7xl px-4 space-y-2">
        {% for m in messages %}
          <div class="rounded-lg px-3 py-2 text-sm
                      {% if 'error' in m.tags %}bg-red-50 text-red-700
                      {% elif 'success' in m.tags %}bg-green-50 text-green-700
                      {% else %}bg-gray-50 text-gray-700{% endif %}">
            {{ m }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <main>{% block content %}{% endblock %}</main>

    <footer class="border-t py-10 text-center text-sm text-gray-500 dark:border-gray-800 dark:text-gray-400">
      Â© {{ now|date:"Y" }} RDTrackr
    </footer>
  </body>
</html>
